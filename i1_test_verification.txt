============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-7.4.3, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/buckstrdr/simple_futures_backtester
configfile: pyproject.toml
plugins: cov-7.0.0, respx-0.22.0, anyio-4.11.0, asyncio-0.21.1, mock-3.15.1, Faker-37.11.0
asyncio: mode=Mode.STRICT
collecting ... collected 130 items

tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_valid_initialization PASSED [  0%]
tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_point_value_validation_raises_error_on_zero PASSED [  1%]
tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_point_value_validation_raises_error_on_negative PASSED [  2%]
tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_tick_size_validation_raises_error_on_zero PASSED [  3%]
tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_tick_size_validation_raises_error_on_negative PASSED [  3%]
tests/test_extensions/test_futures_portfolio.py::TestFuturesPortfolioInitialization::test_properties_accessible PASSED [  4%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_total_pnl_multiplied_by_point_value[1.0] PASSED [  5%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_total_pnl_multiplied_by_point_value[2.0] PASSED [  6%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_total_pnl_multiplied_by_point_value[50.0] PASSED [  6%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_avg_trade_pnl_multiplied[1.0] PASSED [  7%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_avg_trade_pnl_multiplied[2.0] PASSED [  8%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_avg_trade_pnl_multiplied[50.0] PASSED [  9%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_max_drawdown_dollars_multiplied[1.0] PASSED [ 10%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_max_drawdown_dollars_multiplied[2.0] PASSED [ 10%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_max_drawdown_dollars_multiplied[50.0] PASSED [ 11%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_ratio_metrics_not_multiplied[1.0] PASSED [ 12%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_ratio_metrics_not_multiplied[2.0] PASSED [ 13%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_ratio_metrics_not_multiplied[50.0] PASSED [ 13%]
tests/test_extensions/test_futures_portfolio.py::TestPointValueApplication::test_percentage_metrics_preserved PASSED [ 14%]
tests/test_extensions/test_futures_portfolio.py::TestGetAnalytics::test_analytics_dataclass_returned PASSED [ 15%]
tests/test_extensions/test_futures_portfolio.py::TestGetAnalytics::test_all_fields_populated PASSED [ 16%]
tests/test_extensions/test_futures_portfolio.py::TestGetAnalytics::test_dollar_metrics_vs_price_metrics PASSED [ 16%]
tests/test_extensions/test_futures_portfolio.py::TestGetAnalytics::test_fallback_logic_for_win_count PASSED [ 17%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_zero_trades_returns_defaults PASSED [ 18%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_nan_values_handled PASSED [ 19%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_none_values_handled PASSED [ 20%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_infinity_values_handled PASSED [ 20%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_all_winning_trades PASSED [ 21%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_all_losing_trades PASSED [ 22%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_no_returns_acc_attribute PASSED [ 23%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_no_drawdowns_attribute PASSED [ 23%]
tests/test_extensions/test_futures_portfolio.py::TestEdgeCases::test_minimal_portfolio_missing_attributes PASSED [ 24%]
tests/test_extensions/test_futures_portfolio.py::TestEquityAndDrawdownCurves::test_get_equity_curve_multiplies_by_point_value PASSED [ 25%]
tests/test_extensions/test_futures_portfolio.py::TestEquityAndDrawdownCurves::test_get_equity_curve_with_numpy_array PASSED [ 26%]
tests/test_extensions/test_futures_portfolio.py::TestEquityAndDrawdownCurves::test_get_drawdown_curve_returns_decimals PASSED [ 26%]
tests/test_extensions/test_futures_portfolio.py::TestEquityAndDrawdownCurves::test_get_drawdown_curve_with_ndarray_input PASSED [ 27%]
tests/test_extensions/test_futures_portfolio.py::TestEquityAndDrawdownCurves::test_equity_curve_shape_matches_portfolio PASSED [ 28%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[4500.13-0.25-4500.25] PASSED [ 29%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[4500.12-0.25-4500.0] PASSED [ 30%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[100.567-0.01-100.57] PASSED [ 30%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[100.563-0.01-100.56] PASSED [ 31%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[1234.6-1.0-1235.0] PASSED [ 32%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[1234.4-1.0-1234.0] PASSED [ 33%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[4500.0-0.25-4500.0] PASSED [ 33%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_rounds_to_tick[100.5-0.01-100.5] PASSED [ 34%]
tests/test_extensions/test_futures_portfolio.py::TestFormatPrice::test_format_price_does_not_affect_calculations PASSED [ 35%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_none PASSED [ 36%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_nan PASSED [ 36%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_inf PASSED [ 37%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_valid_number PASSED [ 38%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_custom_default PASSED [ 39%]
tests/test_extensions/test_futures_portfolio.py::TestSafeFloat::test_safe_float_with_string_returns_default PASSED [ 40%]
tests/test_extensions/test_futures_portfolio.py::TestPortfolioAnalyticsDataclass::test_dataclass_fields_exist PASSED [ 40%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_long_position_activates_at_threshold PASSED [ 41%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_long_position_trails_from_peak PASSED [ 42%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_long_position_exits_on_retracement PASSED [ 43%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_short_position_activates_at_threshold PASSED [ 43%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_short_position_trails_from_trough PASSED [ 44%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_short_position_exits_on_retracement PASSED [ 45%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_peak_updates_during_trailing[1] PASSED [ 46%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopBasicFunctionality::test_peak_updates_during_trailing[-1] PASSED [ 46%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_no_exit_when_stop_never_triggered PASSED [ 47%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_no_bars_after_entry PASSED [ 48%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_zero_activation_percent PASSED [ 49%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_activation_not_triggered PASSED [ 50%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_immediate_stop_after_activation PASSED [ 50%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_entry_beyond_array_bounds[1] PASSED [ 51%]
tests/test_extensions/test_trailing_stops.py::TestDelayedTrailingStopEdgeCases::test_entry_beyond_array_bounds[-1] PASSED [ 52%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_long_position_uses_high_for_peak PASSED [ 53%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_short_position_uses_low_for_trough PASSED [ 53%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_stop_distance_calculation PASSED [ 54%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_atr_multiplier_variations[1.0] PASSED [ 55%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_atr_multiplier_variations[2.0] PASSED [ 56%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_atr_multiplier_variations[3.0] PASSED [ 56%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_dynamic_atr_values PASSED [ 57%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_immediate_trailing_no_activation_delay[1] PASSED [ 58%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopBasicFunctionality::test_immediate_trailing_no_activation_delay[-1] PASSED [ 59%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_zero_atr_exits_immediately PASSED [ 60%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_no_exit_when_stop_never_hit PASSED [ 60%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_no_bars_after_entry PASSED [ 61%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_negative_atr_multiplier PASSED [ 62%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_entry_beyond_array_bounds[1] PASSED [ 63%]
tests/test_extensions/test_trailing_stops.py::TestATRTrailingStopEdgeCases::test_entry_beyond_array_bounds[-1] PASSED [ 63%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_generates_exit_signals_for_entries PASSED [ 64%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_multiple_entries_generate_multiple_exits PASSED [ 65%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_delayed_stop_type PASSED [ 66%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_atr_stop_type PASSED [ 66%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_missing_atr_raises_error PASSED [ 67%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_empty_entries_array PASSED [ 68%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_no_entries_in_array PASSED [ 69%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_short_position_exits PASSED [ 70%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_zero_activation_immediate_trail PASSED [ 70%]
tests/test_extensions/test_trailing_stops.py::TestGenerateTrailingExits::test_entry_with_no_exit PASSED [ 71%]
tests/test_data/test_validation_comprehensive.py::TestDataValidationError::test_exception_attributes PASSED [ 72%]
tests/test_data/test_validation_comprehensive.py::TestDataValidationError::test_exception_message_format PASSED [ 73%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_column_raises_error[datetime] PASSED [ 73%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_column_raises_error[open] PASSED [ 74%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_column_raises_error[high] PASSED [ 75%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_column_raises_error[low] PASSED [ 76%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_column_raises_error[close] PASSED [ 76%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_first_nan_row_reported PASSED [ 77%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_all_valid_passes PASSED [ 78%]
tests/test_data/test_validation_comprehensive.py::TestCheckNanValues::test_nan_in_datetime_column_first PASSED [ 79%]
tests/test_data/test_validation_comprehensive.py::TestCheckTimestampMonotonicity::test_duplicate_timestamps_fail PASSED [ 80%]
tests/test_data/test_validation_comprehensive.py::TestCheckTimestampMonotonicity::test_backwards_timestamps_fail PASSED [ 80%]
tests/test_data/test_validation_comprehensive.py::TestCheckTimestampMonotonicity::test_single_row_passes PASSED [ 81%]
tests/test_data/test_validation_comprehensive.py::TestCheckTimestampMonotonicity::test_strictly_increasing_passes PASSED [ 82%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_high_less_than_open_fails PASSED [ 83%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_high_less_than_close_fails PASSED [ 83%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_low_greater_than_open_fails PASSED [ 84%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_low_greater_than_close_fails PASSED [ 85%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_high_less_than_low_fails PASSED [ 86%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_valid_ohlc_relationships_pass PASSED [ 86%]
tests/test_data/test_validation_comprehensive.py::TestCheckOhlcBounds::test_ohlc_all_equal_passes PASSED [ 87%]
tests/test_data/test_validation_comprehensive.py::TestCheckVolumeNonNegative::test_negative_volume_fails PASSED [ 88%]
tests/test_data/test_validation_comprehensive.py::TestCheckVolumeNonNegative::test_zero_volume_passes PASSED [ 89%]
tests/test_data/test_validation_comprehensive.py::TestCheckVolumeNonNegative::test_positive_volume_passes PASSED [ 90%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_all_valid_data_passes PASSED [ 90%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_validation_order_nan_first PASSED [ 91%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_validation_order_timestamp_second PASSED [ 92%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_validation_order_ohlc_third PASSED [ 93%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_validation_order_volume_last PASSED [ 93%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataIntegration::test_returns_same_dataframe PASSED [ 94%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_error_message_clarity_nan PASSED [ 95%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_error_message_clarity_timestamp PASSED [ 96%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_error_message_clarity_ohlc PASSED [ 96%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_fail_fast_behavior PASSED [ 97%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_empty_dataframe_handling PASSED [ 98%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_single_row_handling PASSED [ 99%]
tests/test_data/test_validation_comprehensive.py::TestValidateDataEdgeCases::test_single_row_with_invalid_ohlc_fails PASSED [100%]

============================= 130 passed in 1.02s ==============================
